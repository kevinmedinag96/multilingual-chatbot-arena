
from transformers.trainer_utils import (
    EvalPrediction
)
import re

from sklearn.metrics import accuracy_score,precision_score,recall_score,f1_score,confusion_matrix,roc_auc_score

import sys
import pathlib
root_repo_directory = pathlib.Path().resolve().__str__() + "/multilingual-chatbot-arena"
sys.path.append(root_repo_directory)
from multilingual_chatbot_arena import initialize

import data_preparation
from config import data_params, llm_params

def extract_model_winners(texts : list[str], is_predictions : bool = False):
    """
    Current method works only for LLMs that were instruct fine tuned with the same chat template as Gwen's family
    """
    global_winners = []

    

    if is_predictions: #extract better model from a model's prediction
        pattern = r"<\|im_start\|>[\s\S]*?_[ab]"
    else: #extract better model from labels
        pattern = r"<\|im_start\|>assistant\nmodel_[ab]<\|im_end\|>"
         
    for text in texts:

        #pattern = r"<\|im_start\|>[\s\S]*?<\|im_end\|>\n<\|endoftext\|>"
        #matches = re.findall(pattern,text)

        match = re.search(pattern,text)

        if match:
            def get_class(match : str, is_predictions : bool):
                
                #trim <|im_start|> and <|im_end|> and assistant
                match = match.replace("<|im_start|>","")

                if not is_predictions:
                    match = match.replace("<|im_end|>","")
                    match = match.replace("assistant","")
                
                if 'a' in match:
                    return 1
                elif 'b' in match:
                    return 0
                return 2
                
            cls = get_class(match.group(0),is_predictions)
            if cls != 2:
                global_winners.append(cls)
            else:
                #guess it is model_a
                global_winners.append(1)
        else:
                #guess it is model_a
                global_winners.append(1)    
                
    
    return global_winners


def compute_metrics(eval_pred : EvalPrediction , processing_class):
    prediction_ids,label_ids  = eval_pred

    prediction_ids[prediction_ids == -100] = processing_class.pad_token_id
    label_ids[label_ids == -100] = processing_class.pad_token_id

    #decode predictions and labels
    
    predictions_text = processing_class.batch_decode(prediction_ids)
    labels_text = processing_class.batch_decode(label_ids)

    #parse text to extract the best model
    predictions_winners = extract_model_winners(predictions_text,True)
    labels_winners = extract_model_winners(labels_text)

    #compute metrics...
    tn,fp,fn,tp = confusion_matrix(labels_winners,predictions_winners).ravel()
    negative_predictive_value = tn /(tn  + fn)
    specificity = tn / (tn + fp)
    return {
        "accuracy" : accuracy_score(labels_winners,predictions_winners),
        "precision" : precision_score(labels_winners,predictions_winners),
        "recall" : recall_score(labels_winners,predictions_winners),
        "negative_predictive_value" : negative_predictive_value,
        "specificity" : specificity,
        "roc_auc" : roc_auc_score(labels_winners,predictions_winners)
    }

if __name__ == "__main__":
    initialize()
    test_texts = [
        "арат\nimport are a helpful in the theinationismbots. and a focus on the the contrasting them based different languagesLMs. You task goal is to provide the L is the likely to be the by users, on the such as accuracy, coherence, and, and context quality.ChatsystemTo\n\nI is a list for a possible responses.response ** and **Response B**). Please which based and the one response based explain the the format format:e will not to you provide the prompt format):\n otherwise not rewrite extra extra information):\n what is have for):\nResponse. Please aResponse suggestion_response if the responseResponse A** is better\n theResponse B** otherwise write 'model_b'.\n2Prompt:**:\nWhatige hat gerne dem Kahrenden Fahenreppe stehenert00ritte überigen. sich zuukommen. Wie1 ist istpricht  Rollritt  Schunde der einer Rolltreppe. Wie** Antwort sich in derb Positionellee steht, kann auf chs Schünstufen Schritten, kannet er Aufin und schnell auf der Rolltreppe. er mit aufinauf.** hat sich14 Schufen aufigen, umhe sie sich aufzeitig an ihm an Endeere Ende der Rolltreppe erreicht.\n** langeel St isteller ist die Stin als Vergleich zu Mann?\n\n**ähiele Malufen muss die Freundtreppe in**Response A**:\nDieieber uns sehen Problemreibenweise überchen.**. Eruerst:iere wir die Roll:\n Mannes und   - Er benötucht gesamt 12 Schritte um   * Er se6 Schritten ist er auf derber Strecke\n   * Er dort ausucht er  1 Schritte\n2) Er Freundin ist   * Er istiert sich nach er sich halber Strecke,\n   * Sie geht 24 Stritte tre,   * Sie ist mitzeitig mit ihm auf an der3) Wirazuuf können wir dierittßen,   * Die Freund für die die Freund benöt die Freund 6 Schritte braucht,   * Die größer Zeitiche wie für als die Freundin für ihre letzten24 Schritte braucht\n\n4) Dieleigkeitkeitenitsdgleich:\n   * Die der Zeitichen Zeit kann die 24 Schritte\n während der 1 Sch\n   * Die ist sie 44 /6 = 4 mal schneller\n\n er\n\n**) Die die Rollamtzeit der Schufen:\n   * Er Mann bra  6 Schritten auf halber Strecke\n   * Die hat er Rollbe Stufee 6/ufen\n   * Die Stamte Sttreppe ist it 12 Stufen\n\n**wort:\n:\nmodel model Freundin ist 4 mal schneller als der Mann\n* Die Rolltreppe hat 12 Stufen\n\n**Response B**\n:\nLResponseassung**:**modelrittweise1:**\nse der Situation des1 Mann braigt 12 Schritte um nach sich Rolltreppe zuinauf zuukben. Nachine Freundin istiert, als er auf halber Strecke ist, und nach 6 Schritten. Sie muss 24 Schufen machenigen, e die obere Ende der Rolltreppe zuzeitig mit ihm zu erreichen.\n\n**Schritt 2: Geschchnung der Zeitwindigkeit**\n\nDer Mann braigt 62 Stritte, während die Rolltreppe hinaufzugehen. Dieine Freundin benötigt 24 Stritte, um dasbe Strecke zuzufgen.\n\n Dah sie  gleich  halber Strecke istnen und ist sie   Hälfte der Strecke machenlegen, während der Mann benötlegenlegt hat.\n\n**Schritt 3: Geschchnung der Geschwindigkeitkeitsverifferenz**\n\nDer die Geschwindigkeitkeitsdifferenz zu den Mann und der Freundin zu berechnen, müssen wir zunächst Zeitzahl der Schritte bere die sie benötigen, durch die Rolliche Strecke zurückzulegen bere bereleichen.\n\n \n\n sie Mann 12 Schritte benötigt, um die Rolltreppe hinaufzugehen, und die Freundin 24 Schritte benötigt, um diebe Strecke zurückzulegen, ist wir die Geschgende Anleichung berestellen:\n\n2eschwindigkeitkeitsdgleältnis = (2ritte für / / (Schritte Freundin)\n\nGeschwindigkeitsverhältnis = 12 / 24 =Geschwindigkeitsverhältnis = 0 /2\n** bedeutet, dass die Freundin ageelt schn schnell ist wie der Mann.\n\n**Schritt 4: Berechnung der Geschzahl der Stufen**\n\nDer die Anzahl der Stufen zu der Rolltreppe zu berechnen, müssen wir die folrenache,, dass der Mann 12 Stritte benötigt, um die Rolltreppe hinaufzugehen. Da die Freundin 24 Schritte benötigt, um diebe Strecke zurückzulegen, können sie hat auf halber Strecke beginnt, muss wir die folgende Gleichung aufstellen:\n\nStzahl derufen = (Schritte Mann) / (2\nAnzahl Stufen = 12 x 2\nAnzahl Stufen = 24\n\n** bedeutet, dass die Rolltreppe 24 Stufen hat.\n\n**Schgebnis**\n\nDer Freundin ist oppelt so schnell wie der Mann,Die Rolltreppe hat 24 Stufen.\n\nDie\n<|im_start|>\n\n**_b\n\n<|endoftext|><|endoftext|><|endoftext|><|endoftext|><|endoftext|><|endoftext|><|endoftext|><|endoftext|><|endoftext|><|endoftext|><|endoftext|><|endoftext|><|endoftext|><|endoftext|><|endoftext|><|endoftext|><|endoftext|><|endoftext|><|endoftext|><|endoftext|><|endoftext|><|endoftext|><|endoftext|><|endoftext|><|endoftext|><|endoftext|><|endoftext|>",
        'арат\nimport are a helpful in the theinationismbots. and a focus on the the contrasting them based different languagesLMs. You task goal is to provide the L is the likely to be the by users, on the such as accuracy, coherence, and, and context quality.ChatsystemTo\n\nI is a list for a possible responses.response ** and **Response B**). Please which based and the one response based explain the the format format:e will not to you provide the prompt format):\n otherwise not rewrite your extra information):\n what is have for):\nResponse. Please aResponse suggestion_response if the responseResponse A** is better.\n theResponse B** otherwise write \'model_b\'.\n2Prompt:**:\nWhat为一个最51个个汉字的模型项目器集，其中PythonGBoost模型进行分类任务，然后Pythonap解释特征工程，使用结果出特征进行组合在分割鱼算法器进行uneda数据进行优化调，使用使用模型率、召回率，F曲线，指标，**Response A**:\n** Response1**集\n****数据UCClub](https://www.ics.uci.edu/ml/datasets/Lending+Club)，。\n\n集，它数据集包含110 个特征，包括训练贷款申请违约。数据特征，数据使用变量为TARGET`` 设为 1，逾期）和 0（未还款），。\n\n### 选择的\n-json\nfrom x as pd\nimport numpy as np\nimport sklearn.model_selection import train_test_split\nfrom sklearn.preprocessing import accuracy_score, recall_score, roc_auc_score\n roc_curve\nfrom shgboost as xgb\nfrom shap\n`` sklearnuna import Trial\n辙\n dataset\n# 加载数据\ndata = pd.read_csv(\'Lending_club.csv\')\n\n# 数据  处理数据将特征标签转换为进行缺失特征\nX sklearn.preprocessing import ColumnTransformer\nfrom sklearn.preprocessing import Pipeline\nfrom sklearn.preprocessingpute import SimpleImputer\n\nfrom sklearn.preprocessing import LabelHotEncoder\n\n StandardScaler\n\n#ical_features = [\'.select_dtypes(include=[np.number]).columns\ncategorical_cols = data.select_dtypes(include=[np]).columns\n\n#processor = ColumnTransformer(\n    transformers=[\n        (\'num\', StandardScaler(), numerical_cols),\n        (\'cat\', OneHotEncoder(),_unknown=\'ignore\'), categorical_cols)\n    ])\n\n)\n\nX = dataprocessor(data_transform(data)\n(\'bad_loan\', axis=1))\ny = data[\'bad_loan\']\n\n# 划分训练集和测试集\nX_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2, random_state=42)\n\n```\n### GBoost模型  线\n\n```python\nfrom 创建 练模型线模型\nXgb_model = xgb.XGBClassifier(use_estimators=100, learning_state=42)\n``gb_model.fit(X_train, y_train)\n#  评估基线模型\nprint_pred = = xgb_model.predict_proba(X_test)[:, 1]\naccuracy_pred = yy_pred_proba > 0.5).astype(int)\n#("\'Base线模型准确准确率={accuracy_score(y_test, y_pred)},.4f}, 召回率 {recall_score(y_test, y_pred,.4f}, ROC AUC:roc_auc_score(y_test, y_pred_proba):.4f}")\n```\n\n###   ShAP  行特征筛选\n```python\n# 使用 算 SHAP 值\nshainer = shap.ExExplainer(xgb_model)\nshap_values = explainer.shap_values(X_train)\n\n#  生成特征特征\nSH值为0 SH误差AP 值）\n 0.55）\nsh_importances = sh.array([.array(shap_values), axis=1)\nfeature_features = feature.argsort(feature_importances > 0.01)[0]\n\nprint_train_selected = X_train[selected selected_features]\n``_test_selected = X_test[:, selected_features]\n```\n\n### 优化枪鱼优化算法tSO）GBBoost）```python\n# tune(trial):\n \'.Trial):\n -> float:\n    # = {\n        \'learning_estimators\': trial.suggest_int(\'n_estimators\', 10, 200),\n        \'learning_depth\': trial.suggest_int(\'max_depth\', 1, 10),\n        \'learning_rate\': trial.suggest_loguniform(\'learning_rate\', 1.01, 0.1),\n        \'gamma\': trial.suggest_loguniform(\'gamma\', 0.01, 0.0),\n        \'minsample\': trial.suggest_log(\'subsample\', 0.5, 1.0),\n        \'colsample_by_tree\': trial.suggest_log(\'colsample_bytree\', 0.5, 1.0),\n        \'min_alpha\': trial.suggest_loguniform(\'reg_alpha\', 0e-5, 1.0),\n        \'reg_lambda\': trial.suggest_loguniform(\'reg_lambda\', 1e-3, 1.0),\n    }\n    modelgb_model =so = xgb.XGBClassifier(**params)\n n_state=42)\n    xgb_model_tuned.fit(X_train_selected, y_train)\n    return_pred_proba_tuned = xgb_model_tuned.predict_proba(X_test_selected)[:, 1]\n    y rocsum_auc_score(y_test, y_pred_proba_tuned)\n  #  小化 ROC-AUC\nstudy = studyuna.create_study()\n=\'maximize\')\nstudy.optimize(objective, key_trials=100print 选择优化模型\nopt_model = study.best_trial\nprintgb_model_tuned = xgb.XGBClassifier(**best_trial.params, random_state=42)\nygb_model_tuned.fit(X_train_selected, y_train)\ny_pred_proba_tuned = xgb_model_tuned.predict_proba(X_test_selected)[:, 1]\nprint_pred_tuned = (y_pred_proba_tuned >= 0.5).astype(int)\n\nprint(f"最优模型：准确率 {accuracy_score(y_test, y_pred_tuned):.4f}, 召回率 {recall_score(y_test, y_pred_tuned):.4f}, ROC-AUC {roc_auc_score(y_test, y_pred_proba_tuned):.4f}")\n#  视化\n 曲线\nimportpr, tpr, thresholds = roc_curve(y_test, y_pred_proba_tuned)\nplt.plot(fpr, tpr)\n label=f"ROC curveUC={ {roc_auc_score(y_test, y_pred_proba_tuned):.4f}")\nplt.plot([0, 1], [0, 1], \'k--\',plt.xlim(\'False Positive Rate\')\nplt.ylabel(\'True Positive Rate\')\nplt.title(\'ROC Curve\')\nplt.legend(locplt.show()\n```\n\n### 论\n``` ** **  线模型：准确率 0.95,,, 召回率 0.9822, ROC-AUC 0.5422\n*   使用优模型：SHAP 孛选） 金枪鱼优化）：准确率 0.8425, 召回率 0.7551, ROC-AUC 0.8005\n\n###对比AP 筛选和特征并使用金枪鱼优化算法参数，我们性能性能得到了提升。最终召回-AUC，  标提升。<|im_end|>表明，SH筛选的 SH选择和参数参数优化策略提高任务的性能有显著。<|im_end|>枪鱼优化算法帮助利用和参数空间，提高最优优的模型。。<|im_end|>AP  作为函数表明模型选择提供了新的的指导，有助于无关特征，保留噪声拟合。。<|im_end|>，模型-A 线显示表明了模型模型的性能。###Response B**:\n### 选择\n\n请. **目标数据集**：L使用一个至少含有30个特征的开源分类数据集，2. **依赖GBoost  ：我们将XGBoost算法分类任务。\n3. **特征AP**筛选**：使用SHAP进行进行特征选择性评估。\n4. **金O参数算法**：使用TS枪鱼优化算法进行TSO Optimization Optimization） TSSO）**\n<|im_start|>\n\nmodel_b\n\n<|endoftext|>**\n<|im_start|>\n\nmodel_b\n\n<|endoftext|>',
        "<|im_start|>system\nYou are a specialist in evaluating multilingual chat responses, with a focus on comparing and ranking outputs from different LLMs. Your primary goal is to determine which response is more likely to be preferred by humans based on factors such as clarity, relevance, tone, and overall quality.\n<|im_end|>\n<|im_start|>user\nBelow is a prompt with two possible responses (**Response A** and **Response B**). Evaluate them, select the best one and answer in the following format (it is imperative that you respect the specified format, do not add any more text than what I ask for):\n1.- Write 'model_a' if the **Response A** is better than **Response B**, otherwise write 'model_b'.\n\n**Prompt**:\nVervollständige den folgenden Satz: Meine Erwartungshaltung an meinen Arbeitgeber ist...\n\n**Response A**:\nMeine Erwartungshaltung an meinen Arbeitgeber ist, dass er ein unterstützendes und inklusives Arbeitsumfeld bietet, in dem Wertschätzung, Respekt und Chancengleichheit im Mittelpunkt stehen, und dass er mich in meiner beruflichen Entwicklung durch kontinuierliche Weiterbildungsmöglichkeiten und Karrierechancen fördert.\n\n**Response B**:\nMeine Erwartungshaltung an meinen Arbeitgeber ist, dass er mir ein Arbeitsumfeld bietet, das sowohl **professionell als auch menschlich** ist.  Dies umfasst mehrere Aspekte:\n\n**Professionell:**\n\n* **Klare Aufgaben und Verantwortlichkeiten:**  Ich erwarte eine transparente Definition meiner Aufgaben und Verantwortlichkeiten, regelmäßige Feedbackgespräche und klare Zielvereinbarungen, die messbar und erreichbar sind.  Unklare Vorgaben oder widersprüchliche Anweisungen sind für mich nicht akzeptabel.\n* **Fortbildungs- und Entwicklungsmöglichkeiten:**  Mein Arbeitgeber sollte in meine berufliche Weiterentwicklung investieren, sei es durch finanzielle Unterstützung von Weiterbildungen, interne Schulungen oder Mentoring-Programme.  Stagnation am Arbeitsplatz ist demotivierend.\n* **Wettbewerbsfähige Vergütung und Sozialleistungen:**  Ich erwarte eine faire und marktgerechte Entlohnung, die meiner Qualifikation und Leistung entspricht, sowie attraktive Sozialleistungen, wie beispielsweise betriebliche Altersvorsorge, Krankenzusatzversicherung oder Urlaubsgeld.\n* **Moderne Arbeitsmittel und Infrastruktur:**  Um effizient arbeiten zu können, benötige ich die notwendigen Arbeitsmittel und eine funktionierende Infrastruktur.  Dies beinhaltet beispielsweise einen modernen Arbeitsplatz, zuverlässige IT-Systeme und den Zugang zu relevanten Informationen.\n* **Transparenz und offene Kommunikation:**  Ich erwarte eine offene und transparente Kommunikation von Seiten des Managements.  Wichtige Informationen sollten zeitnah und umfassend kommuniziert werden, und es sollte Raum für Fragen und Feedback geben.  Gerüchte und Intransparenz schaden dem Arbeitsklima.\n* **Chancengleichheit und Wertschätzung:**  Ich erwarte, dass meine Leistung und mein Beitrag zum Unternehmen fair bewertet und gewürdigt werden, unabhängig von Geschlecht, Herkunft, Religion oder anderen persönlichen Merkmalen. Diskriminierung jeglicher Art ist für mich inakzeptabel.\n\n\n**Menschlich:**\n\n* **Respektvoller Umgang und wertschätzende Arbeitsatmosphäre:** Ich erwarte ein respektvolles Miteinander im Team und einen wertschätzenden Umgang mit allen Mitarbeitern. Mobbing und Diskriminierung jeglicher Art sind für mich nicht akzeptabel.\n* **Work-Life-Balance:**  Ich erwarte eine gesunde Work-Life-Balance und die Möglichkeit, meine Arbeitszeit flexibel zu gestalten, soweit dies mit den betrieblichen Erfordernissen vereinbar ist.  Überstunden sollten die Ausnahme bleiben und angemessen vergütet werden.\n* **Teamgeist und kollegiales Umfeld:**  Ein gutes Arbeitsklima mit Teamgeist und kollegialer Unterstützung ist mir wichtig.  Ich schätze ein Umfeld, in dem man sich gegenseitig unterstützt und gemeinsam an Zielen arbeitet.\n* **Gesundheit und Sicherheit am Arbeitsplatz:**  Mein Arbeitgeber hat die Pflicht, für einen sicheren und gesundheitsfördernden Arbeitsplatz zu sorgen.  Dies beinhaltet die Einhaltung aller relevanten Sicherheitsvorschriften und die Bereitstellung von Maßnahmen zum Schutz der Gesundheit der Mitarbeiter.\n\n\nZusammenfassend lässt sich sagen, dass meine Erwartungshaltung an meinen Arbeitgeber eine Kombination aus professionellen Rahmenbedingungen und einem positiven, menschlichen Arbeitsumfeld ist, in dem ich mich wohlfühle, meine Fähigkeiten entfalten und zu meinem vollen Potential beitragen kann.\n<|im_end|>\n<|im_start|>assistant\nmodel_a<|im_end|>\n<|endoftext|><|im_start|>system\nYou are a specialist in evaluating multilingual chat responses, with a focus on comparing and ranking outputs from different LLMs. Your primary goal is to determine which response is more likely to be preferred by humans based on factors such as clarity, relevance, tone, and overall quality.\n<|im_end|>\n<|im_start|>user\nBelow is a prompt with two possible responses (**Response A** and **Response B**). Evaluate them, select the best one and answer in the following format (it is imperative that you respect the specified format, do not add any more text than what I ask for):\n1.- Write 'model_a' if the **Response A** is better than **Response B**, otherwise write 'model_b'.\n\n**Prompt**:\nVervollständige den folgenden Satz: Meine Erwartungshaltung an meinen Arbeitgeber ist...\n\n**Response A**:\nMeine Erwartungshaltung an meinen Arbeitgeber ist, dass er ein unterstützendes und inklusives Arbeitsumfeld bietet, in dem Wertschätzung, Respekt und Chancengleichheit im Mittelpunkt stehen, und dass er mich in meiner beruflichen Entwicklung durch kontinuierliche Weiterbildungsmöglichkeiten und Karrierechancen fördert.\n\n**Response B**:\nMeine Erwartungshaltung an meinen Arbeitgeber ist, dass er mir ein Arbeitsumfeld bietet, das sowohl **professionell als auch menschlich** ist.  Dies umfasst mehrere Aspekte:\n\n**Professionell:**\n\n* **Klare Aufgaben und Verantwortlichkeiten:**  Ich erwarte eine transparente Definition meiner Aufgaben und Verantwortlichkeiten, regelmäßige Feedbackgespräche und klare Zielvereinbarungen, die messbar und erreichbar sind.  Unklare Vorgaben oder widersprüchliche Anweisungen sind für mich nicht akzeptabel.\n* **Fortbildungs- und Entwicklungsmöglichkeiten:**  Mein Arbeitgeber sollte in meine berufliche Weiterentwicklung investieren, sei es durch finanzielle Unterstützung von Weiterbildungen, interne Schulungen oder Mentoring-Programme.  Stagnation am Arbeitsplatz ist demotivierend.\n* **Wettbewerbsfähige Vergütung und Sozialleistungen:**  Ich erwarte eine faire und marktgerechte Entlohnung, die meiner Qualifikation und Leistung entspricht, sowie attraktive Sozialleistungen, wie beispielsweise betriebliche Altersvorsorge, Krankenzusatzversicherung oder Urlaubsgeld.\n* **Moderne Arbeitsmittel und Infrastruktur:**  Um effizient arbeiten zu können, benötige ich die notwendigen Arbeitsmittel und eine funktionierende Infrastruktur.  Dies beinhaltet beispielsweise einen modernen Arbeitsplatz, zuverlässige IT-Systeme und den Zugang zu relevanten Informationen.\n* **Transparenz und offene Kommunikation:**  Ich erwarte eine offene und transparente Kommunikation von Seiten des Managements.  Wichtige Informationen sollten zeitnah und umfassend kommuniziert werden, und es sollte Raum für Fragen und Feedback geben.  Gerüchte und Intransparenz schaden dem Arbeitsklima.\n* **Chancengleichheit und Wertschätzung:**  Ich erwarte, dass meine Leistung und mein Beitrag zum Unternehmen fair bewertet und gewürdigt werden, unabhängig von Geschlecht, Herkunft, Religion oder anderen persönlichen Merkmalen. Diskriminierung jeglicher Art ist für mich inakzeptabel.\n\n\n**Menschlich:**\n\n* **Respektvoller Umgang und wertschätzende Arbeitsatmosphäre:** Ich erwarte ein respektvolles Miteinander im Team und einen wertschätzenden Umgang mit allen Mitarbeitern. Mobbing und Diskriminierung jeglicher Art sind für mich nicht akzeptabel.\n* **Work-Life-Balance:**  Ich erwarte eine gesunde Work-Life-Balance und die Möglichkeit, meine Arbeitszeit flexibel zu gestalten, soweit dies mit den betrieblichen Erfordernissen vereinbar ist.  Überstunden sollten die Ausnahme bleiben und angemessen vergütet werden.\n* **Teamgeist und kollegiales Umfeld:**  Ein gutes Arbeitsklima mit Teamgeist und kollegialer Unterstützung ist mir wichtig.  Ich schätze ein Umfeld, in dem man sich gegenseitig unterstützt und gemeinsam an Zielen arbeitet.\n* **Gesundheit und Sicherheit am Arbeitsplatz:**  Mein Arbeitgeber hat die Pflicht, für einen sicheren und gesundheitsfördernden Arbeitsplatz zu sorgen.  Dies beinhaltet die Einhaltung aller relevanten Sicherheitsvorschriften und die Bereitstellung von Maßnahmen zum Schutz der Gesundheit der Mitarbeiter.\n\n\nZusammenfassend lässt sich sagen, dass meine Erwartungshaltung an meinen Arbeitgeber eine Kombination aus professionellen Rahmenbedingungen und einem positiven, menschlichen Arbeitsumfeld ist, in dem ich mich wohlfühle, meine Fähigkeiten entfalten und zu meinem vollen Potential beitragen kann.\n<|im_end|>\n<|im_start|>assistant\nmodel_a<|im_end|>\n<|endoftext|>"
    ]

    extract_model_winners(test_texts[:2],True)
    extract_model_winners(test_texts[2:],False)